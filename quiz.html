<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Molecular Structures</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<a href="index.html">⬅ Back to pathways</a>

<h1 id="title"></h1>
<p id="question"></p>

<img id="structure-img" alt="" width="300" style="display:none;">

<div id="choices"></div>

<button id="nextBtn" style="display:none;">Next</button>

<!-- LOAD PATHWAY DATA -->
<script src="data/glycolysis.js"></script>

<script>
  const params = new URLSearchParams(window.location.search);
  const name = params.get("name");

  let pathwayData = null;

  if (name === "glycolysis") {
    pathwayData = glycolysis;
  }

  const titleEl = document.getElementById("title");
  const questionEl = document.getElementById("question");
  const imgEl = document.getElementById("structure-img");
  const choicesEl = document.getElementById("choices");
  const nextBtn = document.getElementById("nextBtn");

  // ❌ STOP if pathway not found
  if (!pathwayData) {
    titleEl.textContent = "Pathway not found";
    questionEl.textContent =
      "Please go back and select a pathway.";
    throw new Error("Invalid pathway");
  }

  // ✅ Safe to continue
  titleEl.textContent =
    pathwayData.name + " – Molecular Structures";

  let currentIndex = 0;

  function showQuestion() {
    const q = pathwayData.structures[currentIndex];

    questionEl.textContent = q.question;

    imgEl.src = q.image;
    imgEl.alt = q.alt;
    imgEl.style.display = "block";

    choicesEl.innerHTML = "";

    q.options.forEach(option => {
      const btn = document.createElement("button");
      btn.textContent = option;

      btn.onclick = () => {
        alert(option === q.correct ? "Correct!" : "Incorrect");
      };

      choicesEl.appendChild(btn);
    });

    nextBtn.style.display = "inline-block";
  }

  nextBtn.onclick = () => {
    currentIndex++;

    if (currentIndex < pathwayData.structures.length) {
      showQuestion();
    } else {
      questionEl.textContent = "Quiz complete!";
      choicesEl.innerHTML = "";
      imgEl.style.display = "none";
      nextBtn.style.display = "none";
    }
  };

  // ▶ Start quiz
  showQuesti
